var EditVendorAppFallback={},Utils,Utils,Utils,Utils,Utils,Utils,Utils,Utils,Utils,EditOperations,EditOperations,EditOperations,EditOperations,Edit,Edit,Edit,Utils,Shared,Shared;
/*!
  * Bootstrap v5.0.0 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).bootstrap=t()}(this,(function(){"use strict";const e="transitionend",t=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let i=e.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),t=i&&"#"!==i?i.trim():null}return t},i=e=>{const i=t(e);return i&&document.querySelector(i)?i:null},r=e=>{const i=t(e);return i?document.querySelector(i):null},n=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:i}=window.getComputedStyle(e);const r=Number.parseFloat(t),n=Number.parseFloat(i);return r||n?(t=t.split(",")[0],i=i.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(i))):0},s=e=>(e[0]||e).nodeType,o=(t,i)=>{let r=!1;const n=i+5;t.addEventListener(e,(function i(){r=!0,t.removeEventListener(e,i)})),setTimeout((()=>{r||(t=>{t.dispatchEvent(new Event(e))})(t)}),n)},a=()=>{const{jQuery:e}=window;return e&&!document.body.hasAttribute("data-bs-no-jquery")?e:null},l=new Map;var c={set(e,t,i){l.has(e)||l.set(e,new Map);const r=l.get(e);r.has(t)||0===r.size?r.set(t,i):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`)},get:(e,t)=>l.has(e)&&l.get(e).get(t)||null,remove(e,t){if(!l.has(e))return;const i=l.get(e);i.delete(t),0===i.size&&l.delete(e)}};const d=/[^.]*(?=\..*)\.|.*/,u=/\..*/,g=/::\d+$/,h={};let p=1;const m={mouseenter:"mouseover",mouseleave:"mouseout"},f=/^(mouseenter|mouseleave)/i,E=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function v(e,t){return t&&`${t}::${p++}`||e.uidEvent||p++}function S(e){const t=v(e);return e.uidEvent=t,h[t]=h[t]||{},h[t]}function b(e,t,i=null){const r=Object.keys(e);for(let n=0,s=r.length;n<s;n++){const s=e[r[n]];if(s.originalHandler===t&&s.delegationSelector===i)return s}return null}function y(e,t,i){const r="string"==typeof t,n=r?i:t;let s=O(e);return E.has(s)||(s=e),[r,n,s]}function C(e,t,i,r,n){if("string"!=typeof t||!e)return;if(i||(i=r,r=null),f.test(t)){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};r?r=e(r):i=e(i)}const[s,o,a]=y(t,i,r),l=S(e),c=l[a]||(l[a]={}),u=b(c,o,s?i:null);if(u)return void(u.oneOff=u.oneOff&&n);const g=v(o,t.replace(d,"")),h=s?function(e,t,i){return function r(n){const s=e.querySelectorAll(t);for(let{target:o}=n;o&&o!==this;o=o.parentNode)for(let a=s.length;a--;)if(s[a]===o)return n.delegateTarget=o,r.oneOff&&w.off(e,n.type,t,i),i.apply(o,[n]);return null}}(e,i,r):function(e,t){return function i(r){return r.delegateTarget=e,i.oneOff&&w.off(e,r.type,t),t.apply(e,[r])}}(e,i);h.delegationSelector=s?i:null,h.originalHandler=o,h.oneOff=n,h.uidEvent=g,c[g]=h,e.addEventListener(a,h,s)}function U(e,t,i,r,n){const s=b(t[i],r,n);s&&(e.removeEventListener(i,s,Boolean(n)),delete t[i][s.uidEvent])}function O(e){return e=e.replace(u,""),m[e]||e}const w={on(e,t,i,r){C(e,t,i,r,!1)},one(e,t,i,r){C(e,t,i,r,!0)},off(e,t,i,r){if("string"!=typeof t||!e)return;const[n,s,o]=y(t,i,r),a=o!==t,l=S(e),c=t.startsWith(".");if(void 0!==s){if(!l||!l[o])return;return void U(e,l,o,s,n?i:null)}c&&Object.keys(l).forEach((i=>{!function(e,t,i,r){const n=t[i]||{};Object.keys(n).forEach((s=>{if(s.includes(r)){const r=n[s];U(e,t,i,r.originalHandler,r.delegationSelector)}}))}(e,l,i,t.slice(1))}));const d=l[o]||{};Object.keys(d).forEach((i=>{const r=i.replace(g,"");if(!a||t.includes(r)){const t=d[i];U(e,l,o,t.originalHandler,t.delegationSelector)}}))},trigger(e,t,i){if("string"!=typeof t||!e)return null;const r=a(),n=O(t),s=t!==n,o=E.has(n);let l,c=!0,d=!0,u=!1,g=null;return s&&r&&(l=r.Event(t,i),r(e).trigger(l),c=!l.isPropagationStopped(),d=!l.isImmediatePropagationStopped(),u=l.isDefaultPrevented()),o?(g=document.createEvent("HTMLEvents"),g.initEvent(n,c,!0)):g=new CustomEvent(t,{bubbles:c,cancelable:!0}),void 0!==i&&Object.keys(i).forEach((e=>{Object.defineProperty(g,e,{get:()=>i[e]})})),u&&g.preventDefault(),d&&e.dispatchEvent(g),g.defaultPrevented&&void 0!==l&&l.preventDefault(),g}};function L(e){return"true"===e||"false"!==e&&(e===Number(e).toString()?Number(e):""===e||"null"===e?null:e)}function T(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}const A={setDataAttribute(e,t,i){e.setAttribute(`data-bs-${T(t)}`,i)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${T(t)}`)},getDataAttributes(e){if(!e)return{};const t={};return Object.keys(e.dataset).filter((e=>e.startsWith("bs"))).forEach((i=>{let r=i.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),t[r]=L(e.dataset[i])})),t},getDataAttribute:(e,t)=>L(e.getAttribute(`data-bs-${T(t)}`)),offset(e){const t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},position:e=>({top:e.offsetTop,left:e.offsetLeft})},I={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter((e=>e.matches(t))),parents(e,t){const i=[];let r=e.parentNode;for(;r&&r.nodeType===Node.ELEMENT_NODE&&3!==r.nodeType;)r.matches(t)&&i.push(r),r=r.parentNode;return i},prev(e,t){let i=e.previousElementSibling;for(;i;){if(i.matches(t))return[i];i=i.previousElementSibling}return[]},next(e,t){let i=e.nextElementSibling;for(;i;){if(i.matches(t))return[i];i=i.nextElementSibling}return[]}},x="collapse",_="bs.collapse",P={toggle:!0,parent:""},H={toggle:"boolean",parent:"(string|element)"},D="show",k="collapse",M="collapsing",q="collapsed",R="width",$='[data-bs-toggle="collapse"]';class j extends class{constructor(e){(e="string"==typeof e?document.querySelector(e):e)&&(this._element=e,c.set(this._element,this.constructor.DATA_KEY,this))}dispose(){c.remove(this._element,this.constructor.DATA_KEY),w.off(this._element,`.${this.constructor.DATA_KEY}`),this._element=null}static getInstance(e){return c.get(e,this.DATA_KEY)}static get VERSION(){return"5.0.0"}}{constructor(e,t){super(e),this._isTransitioning=!1,this._config=this._getConfig(t),this._triggerArray=I.find(`${$}[href="#${this._element.id}"],${$}[data-bs-target="#${this._element.id}"]`);const r=I.find($);for(let e=0,t=r.length;e<t;e++){const t=r[e],n=i(t),s=I.find(n).filter((e=>e===this._element));null!==n&&s.length&&(this._selector=n,this._triggerArray.push(t))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}static get Default(){return P}static get DATA_KEY(){return _}toggle(){this._element.classList.contains(D)?this.hide():this.show()}show(){if(this._isTransitioning||this._element.classList.contains(D))return;let e,t;this._parent&&(e=I.find(".show, .collapsing",this._parent).filter((e=>"string"==typeof this._config.parent?e.getAttribute("data-bs-parent")===this._config.parent:e.classList.contains(k))),0===e.length&&(e=null));const i=I.findOne(this._selector);if(e){const r=e.find((e=>i!==e));if(t=r?c.get(r,_):null,t&&t._isTransitioning)return}if(w.trigger(this._element,"show.bs.collapse").defaultPrevented)return;e&&e.forEach((e=>{i!==e&&j.collapseInterface(e,"hide"),t||c.set(e,_,null)}));const r=this._getDimension();this._element.classList.remove(k),this._element.classList.add(M),this._element.style[r]=0,this._triggerArray.length&&this._triggerArray.forEach((e=>{e.classList.remove(q),e.setAttribute("aria-expanded",!0)})),this.setTransitioning(!0);const s=`scroll${r[0].toUpperCase()+r.slice(1)}`,a=n(this._element);w.one(this._element,"transitionend",(()=>{this._element.classList.remove(M),this._element.classList.add(k,D),this._element.style[r]="",this.setTransitioning(!1),w.trigger(this._element,"shown.bs.collapse")})),o(this._element,a),this._element.style[r]=`${this._element[s]}px`}hide(){if(this._isTransitioning||!this._element.classList.contains(D))return;if(w.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,this._element.offsetHeight,this._element.classList.add(M),this._element.classList.remove(k,D);const t=this._triggerArray.length;if(t>0)for(let e=0;e<t;e++){const t=this._triggerArray[e],i=r(t);i&&!i.classList.contains(D)&&(t.classList.add(q),t.setAttribute("aria-expanded",!1))}this.setTransitioning(!0),this._element.style[e]="";const i=n(this._element);w.one(this._element,"transitionend",(()=>{this.setTransitioning(!1),this._element.classList.remove(M),this._element.classList.add(k),w.trigger(this._element,"hidden.bs.collapse")})),o(this._element,i)}setTransitioning(e){this._isTransitioning=e}dispose(){super.dispose(),this._config=null,this._parent=null,this._triggerArray=null,this._isTransitioning=null}_getConfig(e){return(e={...P,...e}).toggle=Boolean(e.toggle),((e,t,i)=>{Object.keys(i).forEach((r=>{const n=i[r],o=t[r],a=o&&s(o)?"element":null==(l=o)?`${l}`:{}.toString.call(l).match(/\s([a-z]+)/i)[1].toLowerCase();var l;if(!new RegExp(n).test(a))throw new TypeError(`${e.toUpperCase()}: Option "${r}" provided type "${a}" but expected type "${n}".`)}))})(x,e,H),e}_getDimension(){return this._element.classList.contains(R)?R:"height"}_getParent(){let{parent:e}=this._config;s(e)?void 0===e.jquery&&void 0===e[0]||(e=e[0]):e=I.findOne(e);const t=`${$}[data-bs-parent="${e}"]`;return I.find(t,e).forEach((e=>{const t=r(e);this._addAriaAndCollapsedClass(t,[e])})),e}_addAriaAndCollapsedClass(e,t){if(!e||!t.length)return;const i=e.classList.contains(D);t.forEach((e=>{i?e.classList.remove(q):e.classList.add(q),e.setAttribute("aria-expanded",i)}))}static collapseInterface(e,t){let i=c.get(e,_);const r={...P,...A.getDataAttributes(e),..."object"==typeof t&&t?t:{}};if(!i&&r.toggle&&"string"==typeof t&&/show|hide/.test(t)&&(r.toggle=!1),i||(i=new j(e,r)),"string"==typeof t){if(void 0===i[t])throw new TypeError(`No method named "${t}"`);i[t]()}}static jQueryInterface(e){return this.each((function(){j.collapseInterface(this,e)}))}}var N,F,B;return w.on(document,"click.bs.collapse.data-api",$,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();const t=A.getDataAttributes(this),r=i(this);I.find(r).forEach((e=>{const i=c.get(e,_);let r;i?(null===i._parent&&"string"==typeof t.parent&&(i._config.parent=t.parent,i._parent=i._getParent()),r="toggle"):r=t,j.collapseInterface(e,r)}))})),N=x,F=j,B=()=>{const e=a();if(e){const t=e.fn[N];e.fn[N]=F.jQueryInterface,e.fn[N].Constructor=F,e.fn[N].noConflict=()=>(e.fn[N]=t,F.jQueryInterface)}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",B):B(),{Collapse:j}})),function(e){e.BrowserUtils=class{static onWindowLoad(e){"complete"===document.readyState?e():window.addEventListener("load",e)}static onDocumentReady(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}}}(Utils||(Utils={})),function(e){e.EventUtils=class{static triggerEvent(e,t){let i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!1),e.dispatchEvent(i)}static triggerCustomEvent(e,t,i){var r;window.CustomEvent&&"function"==typeof window.CustomEvent?r=new CustomEvent(t,{detail:i}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,i),e.dispatchEvent(r)}static oneTimeEvent(e,t,i){let r=function(n){e.removeEventListener(t,r),i(n)};e.addEventListener(t,r)}}}(Utils||(Utils={})),function(e){e.ImageResize=class{constructor(t){this.triggerImageChangedEvent=()=>{e.EventUtils.triggerCustomEvent(this.image,"imageChanged")},this.image=document.querySelector(t),this.imageContainer=this.image.parentNode}resizeImageToFitContainer(){this.setImageVisible(!1),this.image.height=this.calcImageHeightToFitContainer(this.image.naturalWidth,this.image.naturalHeight),this.setImageVisible(!0)}setNewImageToFitContainer(t,i,r){let n=this.calcImageHeightToFitContainer(t,i);this.triggerImageChangingEvent(),this.setImageVisible(!1),e.EventUtils.oneTimeEvent(this.image,"load",this.triggerImageChangedEvent),this.image.height=n,this.image.src=r,this.setImageVisible(!0)}triggerImageChangingEvent(){e.EventUtils.triggerCustomEvent(this.image,"imageChanging")}calcImageHeightToFitContainer(e,t){let i,r,n=this.getPixelPropValue(this.imageContainer,"padding-left")+this.getPixelPropValue(this.imageContainer,"padding-right"),s=this.imageContainer.clientWidth-n-1,o=s/e,a=this.getPixelPropValue(this.imageContainer,"padding-bottom")+this.getPixelPropValue(this.imageContainer,"padding-top"),l=this.imageContainer.clientHeight-a-1,c=l/t;return(o<1||c<1)&&(i=o<c?e/s:t/l),r=i?t/i:t,r}getPixelPropValue(e,t){return parseFloat(getComputedStyle(e)[t].replace("px",""))}setImageVisible(e){e?this.image.classList.remove("d-none"):this.image.classList.add("d-none")}}}(Utils||(Utils={})),function(e){e.HtmlUtils=class{static getAriaLabeledBy(e){return e.getAttribute("aria-labelledby").split(" ")}static getIdSelector(e){return`#${e}`}static displayElement(e,t,i){const r="d-none";let n=document.querySelector(e);i?(t&&n.classList.add(t),n.classList.remove(r)):(n.classList.add(r),t&&n.classList.remove(t))}static displayElementDefault(t,i){e.HtmlUtils.displayElement(t,void 0,i)}static displayElementBlock(t,i){e.HtmlUtils.displayElement(t,"d-block",i)}static displayElementFlex(t,i){e.HtmlUtils.displayElement(t,"d-flex",i)}static isInputChecked(e){return e.checked}static closestWithClass(e,t,i){if(i&&e.classList.contains(t))return e;let r=e;for(;(r=r.parentNode)&&(!r.classList||!r.classList.contains(t)););return r}static each(e,t){let i=document.querySelectorAll(e);Array.prototype.forEach.call(i,(function(e){t(e)}))}static empty(e){e.textContent=""}}}(Utils||(Utils={})),function(e){e.StringUtils=class{static isNumber(e){return!isNaN(parseInt(e))}}}(Utils||(Utils={})),function(e){class t{static logEvent(e,i){t.logEventInternal(e,i)}static logError(e,i){t.logEventInternal("Error",e,i)}static logEventInternal(e,i,r){if(!("ga"in window))return;let n=ga.getAll()[0];n&&(r?n.send(t.gaEventParam,e,i,r):n.send(t.gaEventParam,e,i))}}t.gaEventParam="event",e.GAEventLogger=t}(Utils||(Utils={})),function(e){e.GAJsErrorLogger=class{constructor(t){this.logJsError=(t,i,r,n,s)=>{let o;return o=t.toLowerCase().indexOf("script error")>-1?"Script error":`Message: ${t}; URL: ${i}; Line: ${r}; Column: ${n}; Stack: ${s&&s.stack?s.stack:""};`,e.GAEventLogger.logError(`${this.page}JsError`,o),!1},this.page=t,window.onerror=this.logJsError}}}(Utils||(Utils={})),function(e){e.TranslateService=class{static translate(t,...i){if(languageTranslate&&languageTranslate.hasOwnProperty(t)){let e=languageTranslate[t];if(0===i.length)return e;let r=e;for(let e=0;e<i.length;e++)r=r.replace(`{${e}}`,i[e]);return r}return e.GAEventLogger.logError("Translate",`Untranslated string '${t}'`),t}}}(Utils||(Utils={})),function(Utils){class JSLoader{constructor(url,testObjectName){this.checkScriptParsed=(url,testObjectName,retryDelayMs,retryCount,maxRetries,resolveCallback,rejectCallback)=>{let testObject=eval(this.testObjectName);if(testObject)return void resolveCallback();if(retryCount>maxRetries)return void rejectCallback(new Error(`Script parse timeout: '${url}'`));let that=this;setTimeout((function(){that.checkScriptParsed(url,testObjectName,retryDelayMs,retryCount+1,maxRetries,resolveCallback,rejectCallback)}),retryDelayMs)},this.url=url,this.testObjectName=testObjectName}async loadScript(){let testObject=eval(this.testObjectName);if(testObject)return Promise.resolve();let useCdn=cdnConfig.useCdn,url=useCdn?cdnConfig.cdnPrefix+this.url:this.url,loadFailed=!1,loadScriptPromise=this.loadScriptInternal(url,useCdn,this.testObjectName);try{await loadScriptPromise}catch(e){loadFailed=!0}return loadFailed?this.loadScriptInternal(this.url,!1,this.testObjectName):Promise.resolve()}loadScriptInternal(e,t,i){return new Promise(((r,n)=>{let s=document.createElement("script");s.onload=()=>this.checkScriptParsed(e,i,25,1,200,r,n),s.onerror=()=>n(new Error(`Script load error: '${e}'`)),t&&(s.crossOrigin="anonymous"),s.src=e,document.body.appendChild(s)}))}}Utils.JSLoader=JSLoader}(Utils||(Utils={})),function(e){e.EditOperationRedirectResult=class{}}(EditOperations||(EditOperations={})),function(e){e.EditOperationErrorResult=class{}}(EditOperations||(EditOperations={})),function(e){e.EditOperationSuccessResult=class{}}(EditOperations||(EditOperations={})),function(e){class t{constructor(e,t,i,r){this.operationId=e,this.operationTriggerSelector=t,this.statusContainerSelector=i,this.apiEndpoint=r}setProgressMediator(e){this.progressMediator=e}setImageResizer(e){this.imgResizer=e}init(){Utils.BrowserUtils.onDocumentReady((()=>{document.querySelector(this.operationTriggerSelector).addEventListener("click",(e=>{this.handleOperationTriggerClick(e.target)}));let e=document.querySelector(t.EditPanelSelector);e&&(e.addEventListener("imageOperationStartEvent",(e=>{let t=e.detail.operationId;this.handleImageOperationStartEvent(t)})),e.addEventListener("imageOperationCompleteEvent",(e=>{let t=e.detail.operationId,i=e.detail.successResult;this.handleImageOperationCompleteEvent(t,i)})))}))}handleOperationTriggerClick(e){if(!this.permitOperation())return;this.initOperation();let i=this.gatherOperationParams(),r=document.querySelector(t.CultureHdnSelector).value;i.culture=r;let n=this.validateData(i);if(n)return this.hideCurrentStatus(),void this.setError(n);Utils.Ajax.post(this.apiEndpoint,i,void 0,void 0,(e=>{this.handleOperationResult(e)}),(e=>{this.handleOperationFail(e)})),this.hideCurrentStatus(),this.triggerImageOperationStartEvent(),Utils.GAEventLogger.logEvent(t.EditOperationGACategory,this.operationId)}permitOperation(){return!0}initOperation(){}validateData(e){}getImage(){return document.querySelector(t.EditPanelSelector)}handleOperationResult(e){let i=e.redirectUrl;if(void 0!==i){let e=document.querySelector(t.UrlCultureHdnSelector);if(e){let t="/"+e.value;0!=i.indexOf(t)&&(i=t+i)}return void window.location.replace(i)}let r=e.errorMessage;if(null!=r)return this.triggerImageOperationCompleteEvent(void 0),void this.setError(r);let n=e;this.setCurrentImageInfo(n)}setCurrentImageInfo(e){let i=this.getImage(),r=new Image;r.addEventListener("load",(()=>{this.imgResizer.setNewImageToFitContainer(r.naturalWidth,r.naturalHeight,e.currentImagePreviewLink),this.triggerImageOperationCompleteEvent(e)})),r.addEventListener("error",(()=>{i.src=r.src,this.triggerImageOperationCompleteEvent(e)})),r.src=e.currentImagePreviewLink,r.complete&&Utils.EventUtils.triggerEvent(r,"load"),document.querySelector(t.CurrentImageDimensionSelector).textContent=e.currentImageSizeFormatted.toString(),document.querySelector(t.CurrentImageWeightSelector).textContent=e.currentImageLengthFormatted.toString(),document.querySelector(t.CurrentImageFormatSelector).textContent=e.currentImageFormat.toUpperCase(),document.querySelector(t.WidthToHeightHdnSelector).value=e.currentImageWidthToHeightRatio.toString(),document.querySelector(t.WidthHdnSelector).value=e.currentImageWidth.toString(),document.querySelector(t.HeightHdnSelector).value=e.currentImageHeight.toString()}handleOperationFail(e){this.triggerImageOperationCompleteEvent(void 0),this.setError(Utils.TranslateService.translate("Error_ServiceUnavailable")),Utils.GAEventLogger.logError("Edit",`Response status: ${e.status}`)}setError(e){let i=document.querySelector(t.ErrorMessageTemplateSelector).cloneNode(!0);i.id="operationError",i.textContent=e,i.classList.remove("d-none"),document.querySelector(this.statusContainerSelector).appendChild(i),Utils.HtmlUtils.displayElementFlex(this.statusContainerSelector,!0)}triggerImageOperationStartEvent(){Utils.EventUtils.triggerCustomEvent(document.querySelector(t.EditPanelSelector),"imageOperationStartEvent",{operationId:this.operationId})}triggerImageOperationCompleteEvent(e){Utils.EventUtils.triggerCustomEvent(document.querySelector(t.EditPanelSelector),"imageOperationCompleteEvent",{operationId:this.operationId,successResult:e})}handleImageOperationStartEvent(e){this.operationId===e&&(this.setControlsEnabled(!0),this.setOperationProgress(!0),this.progressMediator.signalOperationProgressStart())}handleImageOperationCompleteEvent(e,t){this.operationId===e&&(this.setOperationProgress(!1),this.setControlsEnabled(!1),this.progressMediator.signalOperationProgressComplete())}hideCurrentStatus(){Utils.HtmlUtils.displayElementFlex(this.statusContainerSelector,!1),Utils.HtmlUtils.empty(document.querySelector(this.statusContainerSelector))}setOperationProgress(e){Utils.HtmlUtils.displayElementDefault(`${this.operationTriggerSelector} > .operation-progress`,e)}setControlsEnabled(e){this.setOperationTriggerEnabled(!e),this.setControlButtonsEnabled(!e)}setOperationTriggerEnabled(e){this.setHtmlInputsEnabled(document.querySelector(this.operationTriggerSelector),e)}setHtmlInputsEnabled(e,t){const i="disabled";t?e.removeAttribute(i):e.setAttribute(i,"")}setControlButtonsEnabled(e){Utils.HtmlUtils.each(t.ControlButtonsSelector,(t=>{this.setHtmlDisabledClass(t,e),this.setAriaDisabledAttr(t,e)}))}setHtmlDisabledClass(e,t){const i="disabled";t?e.classList.remove(i):e.classList.add(i)}setAriaDisabledAttr(e,t){const i="aria-disabled";t?e.setAttribute(i,"false"):e.setAttribute(i,"true")}}t.EditOperationGACategory="Edit",t.MaxSizeHdnSelector="#maxSizeHdn",t.MaxResolutionHdnSelector="#maxResolutionHdn",t.WidthHdnSelector="#widthHdn",t.HeightHdnSelector="#heightHdn",t.WidthToHeightHdnSelector="#wToHRatioHdn",t.CultureHdnSelector="#cultureHdn",t.UrlCultureHdnSelector="#urlCultureHdn",t.EditToolboxSelector="#editToolbox",t.EditPanelSelector="#editPanel",t.OperationProgressSelector="#operationProgress",t.ErrorMessageTemplateSelector="#editErrorMessage",t.ControlButtonsSelector="#uploadNewBtn, #revertBtn, #downloadBtn",t.CurrentImageDimensionSelector="#currentImageDimension",t.CurrentImageWeightSelector="#currentImageWeight",t.CurrentImageFormatSelector="#currentImageFormat",e.BaseOperation=t}(EditOperations||(EditOperations={})),function(e){(e.Progress||(e.Progress={})).OperationStatus=class{constructor(e){this.operationStatusSelector=e}display(e){Utils.HtmlUtils.displayElementFlex(this.operationStatusSelector,e)}setStatus(e){e?document.querySelector(this.operationStatusSelector).textContent=e:Utils.HtmlUtils.empty(document.querySelector(this.operationStatusSelector))}}}(Edit||(Edit={})),function(e){(e.Progress||(e.Progress={})).OperationProgress=class{constructor(e){this.progressIndicatorSelector=e}display(e){Utils.HtmlUtils.displayElementFlex(this.progressIndicatorSelector,e)}}}(Edit||(Edit={})),function(e){(e.Progress||(e.Progress={})).ProgressMediator=class{constructor(){this.operationProgress=new e.Progress.OperationProgress("#operationProgress"),this.operationStatus=new e.Progress.OperationStatus("#operationStatus"),this.initialLoaderActive=!0,Utils.BrowserUtils.onDocumentReady((()=>{Utils.BrowserUtils.onWindowLoad((()=>{this.operationProgress.display(!1),this.initialLoaderActive=!1}))}))}signalOperationProgressStart(){this.statusCapableOperationActive&&this.operationStatus.display(!1),this.operationProgress.display(!0)}signalOperationProgressComplete(){this.operationProgress.display(!1),this.statusCapableOperationActive&&this.operationStatus.display(!0)}signalOperationStatusStart(){this.initialLoaderActive&&this.operationProgress.display(!1),this.operationStatus.setStatus(void 0),this.operationStatus.display(!0),this.statusCapableOperationActive=!0}signalOperationStatusChanged(e){this.operationStatus.setStatus(e)}signalOperationStatusComplete(){this.operationStatus.display(!1),this.statusCapableOperationActive=!1}}}(Edit||(Edit={})),function(e){class t{static post(e,i,r,n,s,o,a=!1){let l=i instanceof FormData,c=l?i:t.encodeObject(i);t.postWithRetry(e,c,l,r,n,s,o,a,!0)}static postWithRetry(i,r,n,s,o,a,l,c,d){let u=new XMLHttpRequest;u.onreadystatechange=function(){u.readyState===XMLHttpRequest.DONE&&(200===u.status?(o&&o(),a(JSON.parse(u.responseText))):c&&d?t.postWithRetry(i,r,n,s,o,a,l,c,!1):(o&&o(),l(u)))},u.open("POST",i,!0),s&&u.setRequestHeader(s.name,s.value),n||u.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");try{u.send(r)}catch(t){e.GAEventLogger.logError("Ajax",`Url:${i}, Error:${t.message}`)}}static encodeObject(e){let t=[],i=/%20/g;for(let r in e){let n=e[r],s=void 0===n?"":n,o=`${encodeURIComponent(r).replace(i,"+")}=${encodeURIComponent(s).replace(i,"+")}`;t.push(o)}return t.join("&")}}e.Ajax=t}(Utils||(Utils={})),Shared||(Shared={}),new class{constructor(){Utils.BrowserUtils.onDocumentReady((function(){let e=document.querySelector("#cookieConsentAccept");e&&e.addEventListener("click",(function(e){document.cookie=e.target.getAttribute("data-cookie-string");let t=document.querySelector("#cookieConsent");t.classList.add("d-none"),t.classList.remove("d-flex")}))}))}},function(e){class t{constructor(){Utils.BrowserUtils.onDocumentReady((function(){t.Menus.forEach((function(e){new i(e)})),i.initHideOnClick(t.Menus)}))}}t.Menus=["#lang","#menu"],e.DropdownMenus=t;class i{constructor(e){document.querySelector(`${e} > .${i.DropdownToggleClass}`).addEventListener("click",(function(r){t.Menus.filter((t=>t!==e)).forEach(i.hideMenu),document.querySelector(`${e} > .${i.DropdownMenuClass}`).classList.toggle(i.ShowDropdownClass),r.preventDefault(),r.stopPropagation()}))}static initHideOnClick(e){window.addEventListener("click",(function(){e.forEach(i.hideMenu)}))}static hideMenu(e){let t=document.querySelector(`${e} > .${i.DropdownMenuClass}`);t.classList.contains(i.ShowDropdownClass)&&t.classList.remove(i.ShowDropdownClass)}}i.DropdownToggleClass="dropdown-toggle",i.DropdownMenuClass="dropdown-menu",i.ShowDropdownClass="show-dropdown"}(Shared||(Shared={}));class EditPage{constructor(){this.imgSelector="#editPanel",new Utils.GAJsErrorLogger("Edit"),this.hasImage="true"===document.querySelector("#hasImageHdn").value,this.hasImage?(this.imgResizer=new Utils.ImageResize(this.imgSelector),(new EditPanel).init(this.imgResizer),new EditToolbox(this.imgSelector).init(),this.progressMediator=new Edit.Progress.ProgressMediator):new EditToolbox(this.imgSelector).init(),new Shared.DropdownMenus}registerOperation(e){e.setImageResizer(this.imgResizer),e.setProgressMediator(this.progressMediator)}}class EditToolbox{constructor(e){this.editToolboxSelector="#editToolbox",this.toolboxChangedTriggered=!1,this.triggerSelectedToolboxChangedEventOnLoad=async e=>{let t=document.querySelector("#editToolbox .toolbox-panel.collapse.show"),i=t?t.getAttribute("data-toolboxid"):void 0;if(i||!e)await this.loadOperationJs(i),this.triggerSelectedToolboxChangedEvent(i);else{let e=this;setTimeout((function(){e.triggerSelectedToolboxChangedEventOnLoad(!1)}),500)}},this.editPanelSelector=e}init(){Utils.BrowserUtils.onDocumentReady((()=>{document.querySelector("#editMenu").addEventListener("click",(e=>{this.imageEditingActive||this.handleEditMenuClick(e.target)}));let e=function(e){e.preventDefault()};Utils.HtmlUtils.each("#editMenu a.toolbox-nav-link",(function(t){t.addEventListener("click",e)}));let t=e=>{this.imageEditingActive||this.expandCollapsed(e.currentTarget)};Utils.HtmlUtils.each("#editToolbox div.card-item-header",(function(e){e.addEventListener("click",t)}));let i=e=>{let t=e.currentTarget;this.setParentToolboxVisible(t,"toolbox",!0),this.setExpanderAriaExpandedAttr(t,!1)},r=e=>{let t=e.currentTarget;this.setParentToolboxVisible(t,"toolbox",!1),this.setActiveEditMenuItem(t),this.setExpanderAriaExpandedAttr(t,!0)};Utils.HtmlUtils.each("#editToolbox .toolbox-panel",(function(e){e.addEventListener("hide.bs.collapse",i),e.addEventListener("show.bs.collapse",r)}));let n=()=>{this.toolboxChangedTriggered||(this.triggerSelectedToolboxChangedEventOnLoad(!0),this.toolboxChangedTriggered=!0)},s=document.querySelector(this.editPanelSelector);s&&(s.addEventListener("imageOperationStartEvent",(()=>{this.imageEditingActive=!0})),s.addEventListener("imageOperationCompleteEvent",(()=>{this.imageEditingActive=!1})),s.complete?n():Utils.EventUtils.oneTimeEvent(s,"load",n)),Utils.BrowserUtils.onWindowLoad(n)}))}handleEditMenuClick(e){let t=Utils.HtmlUtils.closestWithClass(e,"edit-menu-nav",!0);t&&this.expandCollapsed(t)}async expandCollapsed(e){let t=document.querySelector(Utils.HtmlUtils.getIdSelector(e.getAttribute("aria-controls")));if(!t.classList.contains("collapse")||!t.classList.contains("show")){new bootstrap.Collapse(t,{toggle:!1,parent:"#editToolbox"}).show();let e=t.getAttribute("data-toolboxid");await this.loadOperationJs(e),this.triggerSelectedToolboxChangedEvent(e)}}async loadOperationJs(e){let t=scriptConfig.scripts.find((t=>t.id===e)),i=scriptConfig.basePath+t.path+"?v="+scriptConfig.version,r=new Utils.JSLoader(i,t.fallbackObj);try{await r.loadScript()}catch(t){Utils.GAEventLogger.logError(`Load${e}Js`,t.message)}return Promise.resolve()}triggerSelectedToolboxChangedEvent(e){Utils.EventUtils.triggerCustomEvent(document.querySelector(this.editToolboxSelector),"selectedToolboxChanged",{toolboxId:e})}setActiveEditMenuItem(e){let t=Utils.HtmlUtils.getAriaLabeledBy(e).filter((function(e){return!!document.querySelector(Utils.HtmlUtils.getIdSelector(e)).classList.contains("edit-menu-nav")})).shift();document.querySelector("#editMenu a.toolbox-nav-link.active").classList.remove("active"),document.querySelector(Utils.HtmlUtils.getIdSelector(t)).classList.add("active")}setExpanderAriaExpandedAttr(e,t){Utils.HtmlUtils.getAriaLabeledBy(e).forEach((function(e){document.querySelector(Utils.HtmlUtils.getIdSelector(e)).setAttribute("aria-expanded",t.toString())}))}setParentToolboxVisible(e,t,i){let r="d-block",n="d-sm-none",s=Utils.HtmlUtils.closestWithClass(e,t,!1).classList;i?(s.add(r,n),s.contains(n)||s.add(n)):(s.remove(r,n),s.contains(n)&&s.remove(n))}}class EditPanel{constructor(){this.resizeHanlderRegistered=!1}init(e){let t=()=>{this.resizeHanlderRegistered||(window.addEventListener("resize",(function(){e.resizeImageToFitContainer()})),this.resizeHanlderRegistered=!0,e.resizeImageToFitContainer())};Utils.BrowserUtils.onDocumentReady((function(){let i=e.image;i.complete?t():(Utils.EventUtils.oneTimeEvent(i,"load",t),Utils.EventUtils.oneTimeEvent(i,"error",t))}))}}let editPage=new EditPage;